import { Grid, Exhibit } from "timvir/blocks";

# Image

The `<Image>` component is a wrapper around the [next/image] component and in
addition to it provides the following features:

- Shows a placeholder while the real image is loading.
- Has the option to show the caption below the image or as an overlay over it.
- Can be a link to another page.

## DOM

The component renders a `<figure>` (with a `<figcaption>` inside it), so
semantically it should hold up well. The DOM tree looks roughly as follows:

```html
<figure>
  <a>
    <img />
  </a>
  <figcaption />
</figure>
```

## Layout

The image is displayed either in its intrinsict aspect ratio, or such that it
fills the available space (equivalent to `object-fit: cover`). In the later case
you need to make sure that the element is stretched vertically by placing it it
inside a grid, using explict height, or similar techniques.

<Grid style={{ margin: "20px 0" }}>
  <Exhibit caption="Image in its intrinsic aspect ratio." style={{ gridColumn: "initial" }}>
    <Sample variant="basic" caption={undefined} />
  </Exhibit>
  <Exhibit caption="Image fills available space (height: 200px)." style={{ gridColumn: "initial" }}>
    <div style={{ display: "grid", height: 200 }}>
      <Sample variant="basic" caption={undefined} fill />
    </div>
  </Exhibit>
</Grid>

## Caption

The caption can be either placed below the image (default), or into an overlay
which is visible on hover.

<Grid style={{ margin: "20px 0" }}>
  <Exhibit caption="Caption below the image." style={{ gridColumn: "initial" }}>
    <Sample variant="basic" captionPlacement="below" />
  </Exhibit>
  <Exhibit caption="Caption shown in overlay on hover." style={{ gridColumn: "initial" }}>
    <Sample variant="basic" captionPlacement="overlay" />
  </Exhibit>
</Grid>

## Link

The image can be optionally wrapped in a link.

<Exhibit caption="An image that is also a link.">
  <div style={{ display: "grid", height: 200 }}>
    <Sample variant="link" caption={undefined} fill />
  </div>
</Exhibit>

## Known Defects

An image with caption and `fill` mode will not render correctly.
The image does not stretch to fill in all available space.
Instead, the image and caption share a roughly equal space (making the image much smaller than it should be).

<Exhibit caption="Known defect: image with caption and fill.">
  <div style={{ display: "grid", height: 200 }}>
    <Sample variant="basic" fill />
  </div>
</Exhibit>

[sqip]: https://github.com/axe312ger/sqip
[next/image]: https://nextjs.org/docs/api-reference/next/image
